<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>DepthLayoutScheme.cs</title><link rel="stylesheet" type="text/css" href="../../../../styles/main.css" /><script type="text/javascript" src="../../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Variables"></a><a name="Topic2460"></a><div class="CTopic TGroup LCSharp first">
 <div class="CTitle">Variables</div>
</div>

<a name="SharpNeat.Drawing.Graph"></a><a name="Topic2461"></a><div class="CTopic TVariable LCSharp">
 <div class="CTitle"><span class="Qualifier">SharpNeat.&#8203;Drawing.</span>&#8203;Graph</div>
 <div id="NDPrototype2461" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">namespace</span> SharpNeat.Drawing.Graph</div></div>
</div>

<a name="DepthLayoutScheme"></a><a name="Topic2462"></a><div class="CTopic TClass LCSharp">
 <div class="CTitle">DepthLayoutScheme</div>
 <div class="NDClassPrototype HasParents" id="NDClassPrototype2462"><a class="CPEntry Parent TInterface" href="../../../../index.html#File:src/SharpNeat.Drawing/Graph/IGraphLayoutScheme.cs:IGraphLayoutScheme" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,2456);" onmouseout="NDContentPage.OnLinkMouseOut(event);" ><div class="CPName">IGraphLayoutScheme</div></a><div class="CPEntry TClass Current"><div class="CPModifiers"><span class="SHKeyword">public sealed</span></div><div class="CPName">DepthLayoutScheme</div></div></div>
 <div class="CBody"><p>An <a href="../../../../index.html#File:src/SharpNeat.Drawing/Graph/IGraphLayoutScheme.cs:IGraphLayoutScheme" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,2456);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >IGraphLayoutScheme</a> that arranges/positions nodes into layers, based on their depth in the network.</p><p>=== Summary/Overview === Lay out nodes based on their depth within the graph/network.&nbsp; The nodes of the graph are assigned a node depth. All nodes at the same depth are defined as being in the same layer, and the nodes of each layer are positioned in a horizontal row, with the depth zero row being placed at the top of the layout area, and the final layer being positioned at the bottom.&nbsp; === Input and Output Layers === The actual layers used are slightly different to the scheme described in the summary. The input nodes and output nodes of a graph are always laid out in their own rows at the top and bottom of the layout area, respectively. Hence, any hidden nodes defined as being at depth zero (i.e. no incoming connections) are actually positioned in the second layer.&nbsp; Likewise, hidden nodes with depths greater than or equal to any node in the output layer are positioned in he layer before the output layer.&nbsp; Essentially there are two 'virtual rows' for input and outputs, and the hidden nodes are arranged in between based on their node depth.&nbsp; === Node Depths === For acyclic graphs the node depths are already determined and stored in the DirectedGraph data structure (specifically in the subclass DirectedGraphAcyclic). This depth info is necessary for using the acyclic graphs (i.e. propagating a signal through the graph, from the input nodes through to he output nodes) and is based on the maximum number of hops to a given node, starting from the input layer.&nbsp; For cyclic graphs this layout scheme calculates node depths using a scheme similar to that used for the acyclic graphs, but with modifications to handle cyclic connections. In this scheme the depth of nodes with multiple incoming connections, some or all of which may be part of a cycle, is based on the average number of hops to that node. This is essentially a heuristic that aims to place nodes 'naturally', i.e. with connections mostly in nearby layers (on average).</p></div>
</div>

<a name="DepthLayoutScheme.Functions"></a><a name="Topic2463"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Functions</div>
</div>

<a name="DepthLayoutScheme.Layout"></a><a name="Topic2464"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">Layout</div>
 <div id="NDPrototype2464" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">public</span> <span class="SHKeyword">void</span> Layout(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../index.html#File:src/SharpNeat/Graphs/DirectedGraph.cs:DirectedGraph" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,807);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraph</a>&nbsp;</td><td class="PName last">digraph,</td></tr><tr><td class="PType first">Size&nbsp;</td><td class="PName last">layoutArea,</td></tr><tr><td class="PType first">Span&lt;Point&gt;&nbsp;</td><td class="PName last">nodePosByIdx</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
</div>

<a name="DepthLayoutScheme.Layout(2)"></a><a name="Topic2465"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">Layout</div>
 <div id="NDPrototype2465" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">public</span> <span class="SHKeyword">void</span> Layout(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="first"></td><td class="PType"><a href="../../../../index.html#File:src/SharpNeat/Graphs/DirectedGraph.cs:DirectedGraph" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,807);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraph</a>&nbsp;</td><td class="PName last">digraph,</td></tr><tr><td class="first"></td><td class="PType">Size&nbsp;</td><td class="PName last">layoutArea,</td></tr><tr><td class="first"></td><td class="PType">Span&lt;Point&gt;&nbsp;</td><td class="PName last">nodePosByIdx,</td></tr><tr><td class="PModifierQualifier first"><span class="SHKeyword">ref</span>&nbsp;</td><td class="PType"><span class="SHKeyword">object</span>?&nbsp;</td><td class="PName last">layoutSchemeData</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
</div>

<a name="DepthLayoutScheme.LayoutNodes"></a><a name="Topic2466"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">LayoutNodes</div>
 <div id="NDPrototype2466" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">private static</span> <span class="SHKeyword">void</span> LayoutNodes(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first">Size&nbsp;</td><td class="PName last">layoutArea,</td></tr><tr><td class="PType first">LightweightList&lt;<span class="SHKeyword">int</span>&gt;[]&nbsp;</td><td class="PName last">nodesByLayer,</td></tr><tr><td class="PType first">Span&lt;Point&gt;&nbsp;</td><td class="PName last">nodePosByIdx</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Layout nodes based on their depth in the graph, i.e. a layer index that has been pre-calculated.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">layoutArea<div class="CDLParameterType">Size</div></td><td class="CDLDefinition"><p>The area to layout nodes within.</p></td></tr><tr><td class="CDLEntry">nodesByLayer<div class="CDLParameterType">LightweightList&lt;<span class="SHKeyword">int</span>&gt;[]</div></td><td class="CDLDefinition"><p>An array of lists. One list per layer, and containing the indexes of the nodes in that layer.</p></td></tr><tr><td class="CDLEntry">nodePosByIdx<div class="CDLParameterType">Span&lt;Point&gt;</div></td><td class="CDLDefinition"><p>A span that will be populated with a 2D position for each node, within the provided layout area.</p></td></tr></table></div>
</div>

<a name="DepthLayoutScheme.BuildNodesByLayer"></a><a name="Topic2467"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">BuildNodesByLayer</div>
 <div id="NDPrototype2467" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">private static</span> LightweightList&lt;<span class="SHKeyword">int</span>&gt;[] BuildNodesByLayer(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../index.html#File:src/SharpNeat/Graphs/DirectedGraph.cs:DirectedGraph" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,807);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraph</a>&nbsp;</td><td class="PName last">digraph</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
</div>

<a name="DepthLayoutScheme.BuildNodeLayerByIdx"></a><a name="Topic2468"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">BuildNodeLayerByIdx</div>
 <div id="NDPrototype2468" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">private static</span> <span class="SHKeyword">int</span>[] BuildNodeLayerByIdx(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../index.html#File:src/SharpNeat/Graphs/DirectedGraph.cs:DirectedGraph" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,807);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraph</a>&nbsp;</td><td class="PName last">digraph</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
</div>

<a name="DepthLayoutScheme.BuildNodeLayerByIdx_Acyclic"></a><a name="Topic2469"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">BuildNodeLayerByIdx_Acyclic</div>
 <div id="NDPrototype2469" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">private static</span> <span class="SHKeyword">int</span>[] BuildNodeLayerByIdx_Acyclic(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../index.html#File:src/SharpNeat/Graphs/Acyclic/DirectedGraphAcyclic.cs:DirectedGraphAcyclic" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,690);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraphAcyclic</a>&nbsp;</td><td class="PName last">digraphAcyclic</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Create an array that gives the node layer for each node, keyed by node index.</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">digraphAcyclic<div class="CDLParameterType"><a href="../../../../index.html#File:src/SharpNeat/Graphs/Acyclic/DirectedGraphAcyclic.cs:DirectedGraphAcyclic" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,690);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraphAcyclic</a></div></td><td class="CDLDefinition"><p>The directed acyclic graph.</p></td></tr></table><div class="CHeading">Returns</div><p>A new integer array.</p></div>
</div>

<a name="DepthLayoutScheme.BuildNodeLayerByIdx_Cyclic"></a><a name="Topic2470"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">BuildNodeLayerByIdx_Cyclic</div>
 <div id="NDPrototype2470" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">private static</span> <span class="SHKeyword">int</span>[] BuildNodeLayerByIdx_Cyclic(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first"><a href="../../../../index.html#File:src/SharpNeat/Graphs/DirectedGraph.cs:DirectedGraph" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,807);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraph</a>&nbsp;</td><td class="PName last">digraph</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Create an array that gives the node layer for each node, keyed by node index.</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">digraph<div class="CDLParameterType"><a href="../../../../index.html#File:src/SharpNeat/Graphs/DirectedGraph.cs:DirectedGraph" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,807);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >DirectedGraph</a></div></td><td class="CDLDefinition"><p>The directed cyclic graph.</p></td></tr></table><div class="CHeading">Returns</div><p>A new integer array.</p></div>
</div>

<a name="DepthLayoutScheme.RemoveEmptyLayers"></a><a name="Topic2471"></a><div class="CTopic TFunction LCSharp">
 <div class="CTitle">RemoveEmptyLayers</div>
 <div id="NDPrototype2471" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">private static</span> <span class="SHKeyword">void</span> RemoveEmptyLayers(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first">Span&lt;<span class="SHKeyword">int</span>&gt;&nbsp;</td><td class="PName last">nodeLayerByIdx,</td></tr><tr><td class="PType first"><span class="SHKeyword">int</span>&nbsp;</td><td class="PName last">layerCount</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
</div>

<a name="DepthLayoutScheme.DepthLayoutSchemeData"></a><a name="Topic2472"></a><div class="CTopic TClass LCSharp">
 <div class="CTitle"><span class="Qualifier">DepthLayoutScheme.</span>&#8203;DepthLayoutSchemeData</div>
 <div class="NDClassPrototype" id="NDClassPrototype2472"><div class="CPEntry TClass Current"><div class="CPModifiers"><span class="SHKeyword">private sealed</span></div><div class="CPName"><span class="Qualifier">DepthLayoutScheme.</span>&#8203;DepthLayoutSchemeData</div></div></div>
</div>

<a name="DepthLayoutScheme.DepthLayoutSchemeData.Properties"></a><a name="Topic2473"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Properties</div>
</div>

<a name="DepthLayoutScheme.DepthLayoutSchemeData.NodesByLayer"></a><a name="Topic2474"></a><div class="CTopic TProperty LCSharp">
 <div class="CTitle">NodesByLayer</div>
 <div id="NDPrototype2474" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">public</span> LightweightList&lt;<span class="SHKeyword">int</span>&gt;[] NodesByLayer { <span class="SHKeyword">get</span> }</div></div>
</div>

<a name="DepthLayoutScheme.DepthLayoutSchemeData.Functions"></a><a name="Topic2475"></a><div class="CTopic TGroup LCSharp">
 <div class="CTitle">Functions</div>
</div>

<a name="DepthLayoutScheme.DepthLayoutSchemeData.DepthLayoutSchemeData"></a><a name="Topic2476"></a><div class="CTopic TFunction LCSharp last">
 <div class="CTitle">DepthLayoutSchemeData</div>
 <div id="NDPrototype2476" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">public</span> DepthLayoutSchemeData(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PType first">LightweightList&lt;<span class="SHKeyword">int</span>&gt;[]&nbsp;</td><td class="PName last">nodesByLayer</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
</div>

</body></html>